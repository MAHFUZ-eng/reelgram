<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Reelgram â€” Social Media Reimagined</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body>
  <!-- App Shell -->
  <div class="app">
    <!-- Top Header (Mobile/Desktop) -->
    <header class="top-header">
      <div class="header-left">
        <div class="brand">
          <div class="logo">ðŸ“±</div>
          <div class="title">Reelgram</div>
        </div>
      </div>
      
      <div class="header-center">
        <div class="search-bar">
          <svg class="search-icon" viewBox="0 0 24 24">
            <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke="currentColor" fill="none" stroke-width="2"/>
          </svg>
          <input id="searchInput" type="text" placeholder="Search users & reels..." />
        </div>
      </div>
      
      <div class="header-right">
        <button class="icon-btn theme-toggle" id="themeToggle">
          <svg class="sun-icon" viewBox="0 0 24 24">
            <path d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707" stroke="currentColor" fill="none" stroke-width="2"/>
          </svg>
          <svg class="moon-icon" viewBox="0 0 24 24" style="display: none;">
            <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" stroke="currentColor" fill="currentColor"/>
          </svg>
        </button>
        <div class="user-avatar" id="currentUserAvatar">
          <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face" alt="User" id="userAvatarImg">
        </div>
      </div>
    </header>

    <!-- Stories Section -->
    <div class="stories-section">
      <div class="stories-container">
        <div class="story add-story" id="addStoryBtn">
          <div class="story-avatar">
            <div class="add-icon">+</div>
          </div>
          <span class="story-label">Your Story</span>
        </div>
        <div id="storiesContainer"></div>
      </div>
    </div>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Mobile View: Single Column -->
      <div class="mobile-view">
        <!-- Feed Container -->
        <div class="feed-container">
          <div class="feed-header mobile-only">
            <div class="feed-tabs">
              <button class="tab-btn active" data-tab="reels">Reels</button>
              <button class="tab-btn" data-tab="following">Following</button>
              <button class="tab-btn" data-tab="discover">Discover</button>
            </div>
          </div>
          
          <!-- TikTok-style Reels Feed -->
          <div class="reels-feed" id="reelsFeed">
            <!-- Reels will be injected here -->
          </div>
        </div>
      </div>

      <!-- Desktop View: Multi Column -->
      <div class="desktop-view">
        <!-- Left Sidebar -->
        <aside class="sidebar left">
          <div class="nav-section">
            <div class="nav-item active" data-page="home">
              <svg class="nav-icon" viewBox="0 0 24 24">
                <path d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m0-11l7-7m-10 18v-2a1 1 0 011-1h2m8-8v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-1m0-8l7-7" stroke="currentColor" fill="none" stroke-width="2"/>
              </svg>
              <span>Home</span>
            </div>
            <div class="nav-item" data-page="explore">
              <svg class="nav-icon" viewBox="0 0 24 24">
                <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke="currentColor" fill="none" stroke-width="2"/>
              </svg>
              <span>Explore</span>
            </div>
            <div class="nav-item" data-page="reels">
              <svg class="nav-icon" viewBox="0 0 24 24">
                <path d="M7 4V2C7 1.45 7.45 1 8 1h8c.55 0 1 .45 1 1v2h3c.55 0 1 .45 1 1s-.45 1-1 1h-1v11c0 1.1-.9 2-2 2H7c-1.1 0-2-.9-2-2V6H4c-.55 0-1-.45-1-1s.45-1 1-1h3z" fill="currentColor"/>
              </svg>
              <span>Reels</span>
            </div>
            <div class="nav-item" data-page="messages" id="messagesNavBtn">
              <svg class="nav-icon" viewBox="0 0 24 24">
                <path d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" stroke="currentColor" fill="none" stroke-width="2"/>
              </svg>
              <span>Messages</span>
            </div>
            <div class="nav-item" data-page="profile" id="profileNavBtn">
              <svg class="nav-icon" viewBox="0 0 24 24">
                <path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" stroke="currentColor" fill="none" stroke-width="2"/>
              </svg>
              <span>Profile</span>
            </div>
            
            <div class="nav-divider"></div>
            
            <div class="nav-item create-btn" id="createReelBtn">
              <svg class="nav-icon" viewBox="0 0 24 24">
                <path d="M12 4v16m8-8H4" stroke="currentColor" fill="none" stroke-width="2"/>
              </svg>
              <span>Create</span>
            </div>
          </div>
          
          <div class="suggested-section">
            <h4>Suggested for you</h4>
            <ul id="suggestedUsers" class="suggested-users"></ul>
          </div>
        </aside>

        <!-- Main Feed -->
        <section class="main-feed">
          <div class="feed-content" id="feedContent">
            <!-- Content will be injected based on active tab -->
          </div>
        </section>

        <!-- Right Sidebar -->
        <aside class="sidebar right">
          <div class="widget">
            <h4>Recent Chats</h4>
            <div id="recentChats" class="recent-chats"></div>
          </div>
          
          <div class="widget">
            <h4>Trending</h4>
            <div class="trending-tags">
              <span class="tag">#reels</span>
              <span class="tag">#viral</span>
              <span class="tag">#trending</span>
              <span class="tag">#funny</span>
            </div>
          </div>
        </aside>
      </div>
    </main>

    <!-- Bottom Navigation (Mobile) -->
    <nav class="bottom-nav mobile-only">
      <button class="nav-btn active" data-page="home">
        <svg viewBox="0 0 24 24">
          <path d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m0-11l7-7m-10 18v-2a1 1 0 011-1h2m8-8v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-1m0-8l7-7" stroke="currentColor" fill="none" stroke-width="2"/>
        </svg>
        <span>Home</span>
      </button>
      <button class="nav-btn" data-page="explore">
        <svg viewBox="0 0 24 24">
          <path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" stroke="currentColor" fill="none" stroke-width="2"/>
        </svg>
        <span>Explore</span>
      </button>
      <button class="nav-btn create" id="mobileCreateBtn">
        <svg viewBox="0 0 24 24">
          <path d="M12 4v16m8-8H4" stroke="currentColor" fill="none" stroke-width="3"/>
        </svg>
      </button>
      <button class="nav-btn" data-page="messages" id="mobileMessagesBtn">
        <svg viewBox="0 0 24 24">
          <path d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" stroke="currentColor" fill="none" stroke-width="2"/>
        </svg>
        <span>Messages</span>
      </button>
      <button class="nav-btn" data-page="profile" id="mobileProfileBtn">
        <div class="profile-avatar">
          <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=24&h=24&fit=crop&crop=face" alt="Profile">
        </div>
      </button>
    </nav>
  </div>

  <!-- Comments Modal -->
  <dialog id="commentsModal" class="modal">
    <div class="modal-header">
      <h3>Comments</h3>
      <button class="icon-btn" id="closeComments">âœ–</button>
    </div>
    <div id="commentsList" class="comments"></div>
    <form id="commentForm" class="comment-form">
      <input id="commentInput" type="text" placeholder="Write a comment..." required />
      <button class="btn" type="submit">Post</button>
    </form>
  </dialog>

  <!-- Inbox / Chat Drawer -->
  <dialog id="inboxModal" class="modal wide">
    <div class="modal-header">
      <h3>Messages</h3>
      <button class="icon-btn" id="closeInbox">âœ–</button>
    </div>
    <div class="chat-container">
      <aside class="chat-list">
        <div class="field padded">
          <input id="newChatUserInput" type="text" placeholder="Start chat with user..." />
          <button id="startChatBtn" class="btn">Start</button>
        </div>
        <ul id="chatUsers" class="user-list"></ul>
      </aside>
      <section class="chat-pane">
        <div id="chatHeader" class="chat-header">Select a conversation</div>
        <div id="chatLog" class="chat-log"></div>
        <form id="chatForm" class="chat-form">
          <input id="chatMessage" type="text" placeholder="Type a message..." />
          <button class="btn" type="submit">Send</button>
        </form>
      </section>
    </div>
  </dialog>

  <!-- Call Panel -->
  <dialog id="callModal" class="modal wide">
    <div class="modal-header">
      <h3>Calls</h3>
      <button class="icon-btn" id="closeCall">âœ–</button>
    </div>
    <div class="call-grid">
      <section class="call-controls card">
        <div class="field">
          <label for="roomCode">Room Code</label>
          <input id="roomCode" type="text" placeholder="Enter same code in both tabs" />
        </div>
        <div class="btn-row">
          <button id="joinRoom" class="btn">Join Room</button>
          <button id="leaveRoom" class="btn ghost">Leave</button>
        </div>
        <div class="btn-row">
          <button id="startCall" class="btn">Start Call</button>
          <button id="hangup" class="btn danger">Hang Up</button>
        </div>
        <div class="btn-row">
          <button id="toggleMic" class="btn ghost">Mute</button>
          <button id="toggleCam" class="btn ghost">Camera Off</button>
        </div>
        <p class="muted small" id="callStatus">Not connected</p>
        <details class="small">
          <summary>How to test</summary>
          <ol class="small">
            <li>Open this page in two tabs/windows.</li>
            <li>Enter the same Room Code in both.</li>
            <li>Click <b>Join Room</b> in both tabs.</li>
            <li>Click <b>Start Call</b> in one tab.</li>
          </ol>
        </details>
      </section>
      <section class="video-area card">
        <div class="video-stack">
          <video id="remoteVideo" playsinline autoplay></video>
          <video id="localVideo" playsinline autoplay muted class="pip"></video>
        </div>
      </section>
    </div>
  </dialog>

  <!-- Auth Modal -->
  <dialog id="authModal" class="modal">
    <div class="modal-header">
      <h3 id="authTitle">Welcome to Reelgram</h3>
    </div>
    
    <!-- Login Form -->
    <div id="loginForm" class="auth-form-container">
      <p>Sign in to your account</p>
      <form id="loginFormEl" class="auth-form">
        <input id="loginEmail" type="email" placeholder="Email" required />
        <input id="loginPassword" type="password" placeholder="Password" required />
        <button class="btn" type="submit">Sign In</button>
      </form>
      <p class="auth-switch">
        Don't have an account? 
        <a href="#" id="showRegisterForm">Sign up</a>
      </p>
    </div>
    
    <!-- Register Form -->
    <div id="registerForm" class="auth-form-container" style="display: none;">
      <p>Create your account</p>
      <form id="registerFormEl" class="auth-form">
        <input id="registerUsername" type="text" placeholder="Username" required />
        <input id="registerEmail" type="email" placeholder="Email" required />
        <input id="registerPassword" type="password" placeholder="Password" required />
        <input id="registerDisplayName" type="text" placeholder="Display Name" required />
        <button class="btn" type="submit">Sign Up</button>
      </form>
      <p class="auth-switch">
        Already have an account? 
        <a href="#" id="showLoginForm">Sign in</a>
      </p>
    </div>
    
    <!-- Verification Notice -->
    <div id="verificationNotice" class="auth-form-container" style="display: none;">
      <h4>Check Your Email</h4>
      <p id="verificationMessage">We've sent a verification email to your address. Please check your email and click the verification link to activate your account.</p>
      <div class="btn-row">
        <button id="resendVerificationBtn" class="btn ghost">Resend Email</button>
        <button id="backToLoginBtn" class="btn">Back to Login</button>
      </div>
      <p class="muted small">Didn't receive the email? Check your spam folder.</p>
    </div>
  </dialog>
  
  <!-- Toast Notifications -->
  <div id="toastContainer" class="toast-container"></div>

  <script src="api.js"></script>
  <script src="app.js"></script>
</body>
</html>
